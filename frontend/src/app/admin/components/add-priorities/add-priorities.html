<div class="add-priority card p-4">
  <h4>Add New Priority</h4>
  <form [formGroup]="priorityForm" (ngSubmit)="onSubmit()" class="mb-4">
    <div class="mb-3">
      <label for="name" class="form-label">Priority Name</label>
      <input
        id="name"
        type="text"
        class="form-control"
        formControlName="name"
        [class.is-invalid]="priorityForm.get('name')?.invalid && priorityForm.get('name')?.touched"
        placeholder="Enter the priority name..."
      />
      <div
        class="invalid-feedback"
        *ngIf="priorityForm.get('name')?.invalid && priorityForm.get('name')?.touched"
      >
        <div *ngIf="priorityForm.get('name')?.errors?.['required']">
          The priority name is required.
        </div>
        <div *ngIf="priorityForm.get('name')?.errors?.['minlength']">
          Priority name must be at least 2 characters.
        </div>
      </div>
    </div>

    <button
      class="btn btn-success"
      type="submit"
      [disabled]="priorityForm.invalid"
    >
      <i class="fas fa-plus me-2"></i>Add
    </button>
  </form>

  <hr />

  <h5>Available Priorities</h5>

  <div *ngIf="priorities$ | async as priorities else noPriorities">
    <div *ngIf="priorities.length > 0; else emptyPriorities">
      <ul class="list-group">
        <li
          class="list-group-item d-flex justify-content-between align-items-center"
          *ngFor="let priority of priorities"
        >
          <span>
            <i class="fas fa-priority me-2 text-primary"></i>
            {{ priority.name }}
          </span>
          <span class="badge bg-secondary rounded-pill">{{ priority.id }}</span>
        </li>
      </ul>
    </div>

    <ng-template #emptyPriorities>
      <div class="alert alert-info">
        <i class="fas fa-info-circle me-2"></i>
        There are no priorities yet.
      </div>
    </ng-template>
  </div>

  <ng-template #noPriorities>
    <div class="d-flex justify-content-center">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  </ng-template>
</div>
<div>
  <button type="button" class="btn btn-go-back btn-success" (click)="goBack()">
    Go Back
  </button>
</div>
